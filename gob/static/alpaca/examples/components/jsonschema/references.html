<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
        <title>Alpaca - HTML5 Forms for jQuery - Using References</title>
        <meta name="keywords"
              content="jquery,bootstrap,forms,form,jquerymobile,jqueryui,mobile,json,json-schema,cloudcms,gitana,cms,content,uzquiano"/>
        <meta name="description" content="Customer Profile Form with Custom View Template."/>
        <meta name="author" content="Gitana Software Inc."/>
        <meta http-equiv="X-UA-Compatible" content="IE=9">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="icon" type="image/x-icon" href="../../../favicon.ico" />

        <!-- jQuery -->
        <script type="text/javascript" src="../../../lib/jquery-latest.min.js"></script>
        <script type="text/javascript" src="../../../lib/jquery.tmpl.js"></script>

        <!-- Alpaca -->
        <script type="text/javascript" src="../../../components/alpaca/alpaca.js"></script>
        <link type="text/css" href="../../../components/alpaca/alpaca.css" rel="stylesheet"/>
        <link type="text/css" href="../../../components/alpaca/alpaca-jqueryui.css" rel="stylesheet"/>

        <!-- jQuery UI Support -->
        <script type="text/javascript" src="../../../lib/jquery-ui-latest/jquery-ui-latest.custom.min.js"></script>
        <link type="text/css" href="../../../lib/jquery-ui-latest/jquery-ui-latest.custom.css" rel="stylesheet"/>

        <!-- Additional CSS -->
        <link type="text/css" href="../../css/960.fluid.css" rel="stylesheet"/>

        <!-- Required for the Editor field (sample code viewing) -->
        <script src="../../../lib/ace/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

        <!-- Web Site -->
        <script type="text/javascript" src="../../lib/google-code-prettify/prettify.min.js"></script>
        <script type="text/javascript" src="../../js/themeswitchertool.js"></script>
        <script type="text/javascript" src="../../js/example.js"></script>
        <script type="text/javascript" src="../../js/footer.js"></script>
        <link type="text/css" href="../../css/site.css" rel="stylesheet"/>
        <link type="text/css" href="../../lib/google-code-prettify/prettify.css" rel="stylesheet"/>
        <script type="text/javascript" src="../../lib/tweet/jquery.tweet.js"></script>
        <link type="text/css" href="../../lib/tweet/jquery.tweet.css" rel="stylesheet"/>

        <script type="text/javascript" src="https://use.typekit.com/fnm3kpm.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    </head>
    <body>
        <header>
            <div class='container_12'>
                <div class='actual-body'>
                    <div class='grid_12'>
                        <h1><img src="../../img/alpaca.png"><span>Easy Forms for jQuery</span></h1>
                        <div class="resource-bar">
                            <a href="../../../index.html">Home</a>
                            <a href="../../../web/download.html">Downloads</a>
                            <a href="javascript:void(0);" class="current">Documentation</a>
                            <a href="../../forms/customer-profile/edit-form.html">Examples</a>
                            <a href="../../../web/resources.html">Resources</a>
                            <a href="../../../web/contactus.html">Contact Us</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class='container_12'>
            <div class="actual-body">
                <div class="grid_3">
                    <div class="container_12 side-bar">
                    </div>
                </div>
                <div class="grid_9">
                    <div class="container_12">
                        <div class="widget">
                            <div class="widget-body">
                                <div class='grid_12 alpaca-example-header' id='references' alpaca-types=''>
                                    <h1>Using References</h1>
                                    <p>
                                        This page shows examples of using JSON schema <code>$ref</code> markup to reference
                                        definitions and other structures within your JSON schema definition to generate
                                        more complex and nested schema documents.
                                    </p>
                                </div>

                                <!-- Example #1: Nested Tree using Array -->
                                <div class='grid_12 alpaca-example-case'>
                                    <h2>Example #1: Nested Tree (using Array)</h2>
                                    <p>
                                        This example demonstrates the use of JSON Schema referencing to include or pull in
                                        schema definitions from other parts of the document.  Alpaca supports referencing within
                                        the same document using simple ids.
                                    </p>
                                    <p>
                                        In this example, we allow the end user to create a tree structure of repeated leaf
                                        elements that can be nested as many levels deep as they wish.
                                    </p>

                                    <div id="field1"></div>
                                    <script type="text/javascript" id="field1-script">
                                        $(function() {
                                            $("#field1").alpaca({
                                                "type": "create",
                                                "schema": {
                                                    "id": "#leaf",
                                                    "type": "object",
                                                    "properties": {
                                                        "title": {
                                                            "type": "string",
                                                            "title": "Name",
                                                            "required": true
                                                        },
                                                        "children": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#leaf"
                                                            }
                                                        }
                                                    }
                                                }
                                            });
                                        });
                                    </script>
                                </div>

                                <div class='grid_12 alpaca-example-case'>
                                    <h2>Example #2: Deeply Nested Tree (loaded from data)</h2>
                                    <p>
                                        This example shows a deeply nested tree loaded with data.  Note that unlike the previous
                                        example, this example uses a non-'create' view which allows data to bind.
                                    </p>

                                    <div id="field2"></div>
                                    <script type="text/javascript" id="field2-script">
                                        $(function() {
                                            $("#field2").alpaca({
                                                "data": [{
                                                    "title": "Node 1.1",
                                                    "children": [{
                                                        "title": "Node 2.1",
                                                        "children": [{
                                                            "title": "Node 3.1",
                                                            "children": [{
                                                                "title": "Node 4.1"
                                                            }]
                                                        }, {
                                                            "title": "Node 3.2"
                                                        }]
                                                    }]
                                                }],
                                                "schema": {
                                                    "id": "#leaf",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "title": {
                                                                "type": "string",
                                                                "title": "Name",
                                                                "required": true
                                                            },
                                                            "children": {
                                                                "$ref": "#leaf"
                                                            }
                                                        }
                                                    }
                                                },
                                                "options": {
                                                    "toolbarSticky": true
                                                }
                                            });
                                        });
                                    </script>
                                </div>

                                <!-- Example #3: Composite Object (using referenced schema definition) -->
                                <div class='grid_12 alpaca-example-case'>
                                    <h2>Example #3: Internal Schema Definitions</h2>
                                    <p>
                                        Here is an example of an object that derives one of its sub-object
                                        properties from a referenced schema definition.  The definition is stored in a special
                                        <code>definitions</code> sub-object of the schema.  This definitions sub-object
                                        anticipates support for JSON Schema v4.
                                    </p>

                                    <div id="field3"></div>
                                    <script type="text/javascript" id="field3-script">
                                        $(function() {
                                            $("#field3").alpaca({
                                                "type": "create",
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "title": {
                                                            "type": "string",
                                                            "title": "Name",
                                                            "required": true
                                                        },
                                                        "info": {
                                                            "$ref": "#/definitions/info"
                                                        }
                                                    },
                                                    "definitions": {
                                                        "info": {
                                                            "type": "object",
                                                            "title": "Additional Information",
                                                            "properties": {
                                                                "author": {
                                                                    "type": "string",
                                                                    "title": "Author"
                                                                },
                                                                "review": {
                                                                    "type": "string",
                                                                    "enum": [
                                                                        "Good",
                                                                        "Bad",
                                                                        "Ugly"
                                                                    ],
                                                                    "default": "Good"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            });
                                        });
                                    </script>
                                </div>

                                <!-- Example #4: Composite Object (using referenced schema + options) -->
                                <div class='grid_12 alpaca-example-case'>
                                    <h2>Example #4: Referenced Schema + Options Definitions</h2>
                                    <p>
                                        This example extends example #3 by showing how a reference to the definitions block
                                        can include both schema and options information.
                                
                                        The resolution of the definition finds both the schema and the options (within their
                                        respective definitions blocks).  In this case, we change the author field to a text area
                                        ("textarea") and the review field to a drop down ("select").
                                    </p>

                                    <div id="field4"></div>
                                    <script type="text/javascript" id="field4-script">
                                        $(function() {
                                            $("#field4").alpaca({
                                                "type": "create",
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "title": {
                                                            "type": "string",
                                                            "title": "Name",
                                                            "required": true
                                                        },
                                                        "info": {
                                                            "$ref": "#/definitions/info"
                                                        }
                                                    },
                                                    "definitions": {
                                                        "info": {
                                                            "type": "object",
                                                            "title": "Additional Information",
                                                            "properties": {
                                                                "author": {
                                                                    "type": "string",
                                                                    "title": "Author"
                                                                },
                                                                "review": {
                                                                    "type": "string",
                                                                    "enum": ["Good", "Bad", "Ugly"],
                                                                    "default": "Good"
                                                                }
                                                            }
                                                        }
                                                    }
                                                },
                                                "options": {
                                                    "definitions": {
                                                        "info": {
                                                            "fields": {
                                                                "author": {
                                                                    "type": "textarea"
                                                                },
                                                                "review": {
                                                                    "type": "select"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            });
                                        });
                                    </script>
                                </div>

                                <!-- BEGIN DISCUSSIONS -->
                                <div class="alpaca-discussions"></div>
                                <!-- END DISCUSSIONS -->

                                <div class="clear height-fix"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <div class="container_12">
                <div class="grid_12 copyright">
                    Copyright &copy; 2013 Gitana Software, Inc. | All Rights Reserved
                </div>
            </div>
        </footer>
    </body>
</html>
